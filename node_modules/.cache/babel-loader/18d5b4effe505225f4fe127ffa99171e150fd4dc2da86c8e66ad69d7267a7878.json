{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useDocumentLoader = void 0;\nvar react_1 = require(\"react\");\nvar state_1 = require(\"../state\");\nvar actions_1 = require(\"../state/actions\");\nvar fileLoaders_1 = require(\"./fileLoaders\");\nvar useRendererSelector_1 = require(\"./useRendererSelector\");\n/**\n * Custom Hook for loading the current document into context\n */\nexports.useDocumentLoader = function () {\n  var _a = react_1.useContext(state_1.DocViewerContext),\n    state = _a.state,\n    dispatch = _a.dispatch;\n  var currentFileNo = state.currentFileNo,\n    currentDocument = state.currentDocument;\n  var CurrentRenderer = useRendererSelector_1.useRendererSelector().CurrentRenderer;\n  var documentURI = (currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.uri) || \"\";\n  react_1.useEffect(function () {\n    if (!currentDocument) return;\n    if (currentDocument.fileType !== undefined) return;\n    var controller = new AbortController();\n    var signal = controller.signal;\n    fetch(documentURI, {\n      method: \"HEAD\",\n      signal: signal\n    }).then(function (response) {\n      var contentTypeRaw = response.headers.get(\"content-type\");\n      var contentTypes = (contentTypeRaw === null || contentTypeRaw === void 0 ? void 0 : contentTypeRaw.split(\";\")) || [];\n      var contentType = contentTypes.length ? contentTypes[0] : undefined;\n      dispatch(actions_1.updateCurrentDocument(__assign(__assign({}, currentDocument), {\n        fileType: contentType || undefined\n      })));\n    });\n    return function () {\n      controller.abort();\n    };\n  },\n  // eslint ignore added, because a warning appears for dispatch to\n  // be a dependancy of the useEffect\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [currentFileNo, documentURI]);\n  react_1.useEffect(function () {\n    var _a;\n    if (!currentDocument || CurrentRenderer === undefined) return;\n    var controller = new AbortController();\n    var signal = controller.signal;\n    var fileLoaderComplete = function (fileReader) {\n      if (!currentDocument || !fileReader) {\n        dispatch(actions_1.setDocumentLoading(false));\n        return;\n      }\n      var updatedDocument = __assign({}, currentDocument);\n      if (fileReader.result !== null) {\n        updatedDocument.fileData = fileReader.result;\n      }\n      dispatch(actions_1.updateCurrentDocument(updatedDocument));\n      dispatch(actions_1.setDocumentLoading(false));\n    };\n    if (CurrentRenderer === null) {\n      dispatch(actions_1.setDocumentLoading(false));\n    } else if (CurrentRenderer.fileLoader !== undefined) {\n      (_a = CurrentRenderer.fileLoader) === null || _a === void 0 ? void 0 : _a.call(CurrentRenderer, {\n        documentURI: documentURI,\n        signal: signal,\n        fileLoaderComplete: fileLoaderComplete\n      });\n    } else {\n      fileLoaders_1.defaultFileLoader({\n        documentURI: documentURI,\n        signal: signal,\n        fileLoaderComplete: fileLoaderComplete\n      });\n    }\n    return function () {\n      controller.abort();\n    };\n  }, [CurrentRenderer]);\n  return {\n    state: state,\n    dispatch: dispatch,\n    CurrentRenderer: CurrentRenderer\n  };\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","useDocumentLoader","react_1","require","state_1","actions_1","fileLoaders_1","useRendererSelector_1","_a","useContext","DocViewerContext","state","dispatch","currentFileNo","currentDocument","CurrentRenderer","useRendererSelector","documentURI","uri","useEffect","fileType","undefined","controller","AbortController","signal","fetch","method","then","response","contentTypeRaw","headers","get","contentTypes","split","contentType","updateCurrentDocument","abort","fileLoaderComplete","fileReader","setDocumentLoading","updatedDocument","result","fileData","fileLoader","defaultFileLoader"],"sources":["C:/Users/SOUMYADIP GHOSH/OneDrive/Desktop/college project/node_modules/react-doc-viewer/build/utils/useDocumentLoader.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useDocumentLoader = void 0;\nvar react_1 = require(\"react\");\nvar state_1 = require(\"../state\");\nvar actions_1 = require(\"../state/actions\");\nvar fileLoaders_1 = require(\"./fileLoaders\");\nvar useRendererSelector_1 = require(\"./useRendererSelector\");\n/**\n * Custom Hook for loading the current document into context\n */\nexports.useDocumentLoader = function () {\n    var _a = react_1.useContext(state_1.DocViewerContext), state = _a.state, dispatch = _a.dispatch;\n    var currentFileNo = state.currentFileNo, currentDocument = state.currentDocument;\n    var CurrentRenderer = useRendererSelector_1.useRendererSelector().CurrentRenderer;\n    var documentURI = (currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.uri) || \"\";\n    react_1.useEffect(function () {\n        if (!currentDocument)\n            return;\n        if (currentDocument.fileType !== undefined)\n            return;\n        var controller = new AbortController();\n        var signal = controller.signal;\n        fetch(documentURI, { method: \"HEAD\", signal: signal }).then(function (response) {\n            var contentTypeRaw = response.headers.get(\"content-type\");\n            var contentTypes = (contentTypeRaw === null || contentTypeRaw === void 0 ? void 0 : contentTypeRaw.split(\";\")) || [];\n            var contentType = contentTypes.length ? contentTypes[0] : undefined;\n            dispatch(actions_1.updateCurrentDocument(__assign(__assign({}, currentDocument), { fileType: contentType || undefined })));\n        });\n        return function () {\n            controller.abort();\n        };\n    }, \n    // eslint ignore added, because a warning appears for dispatch to\n    // be a dependancy of the useEffect\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [currentFileNo, documentURI]);\n    react_1.useEffect(function () {\n        var _a;\n        if (!currentDocument || CurrentRenderer === undefined)\n            return;\n        var controller = new AbortController();\n        var signal = controller.signal;\n        var fileLoaderComplete = function (fileReader) {\n            if (!currentDocument || !fileReader) {\n                dispatch(actions_1.setDocumentLoading(false));\n                return;\n            }\n            var updatedDocument = __assign({}, currentDocument);\n            if (fileReader.result !== null) {\n                updatedDocument.fileData = fileReader.result;\n            }\n            dispatch(actions_1.updateCurrentDocument(updatedDocument));\n            dispatch(actions_1.setDocumentLoading(false));\n        };\n        if (CurrentRenderer === null) {\n            dispatch(actions_1.setDocumentLoading(false));\n        }\n        else if (CurrentRenderer.fileLoader !== undefined) {\n            (_a = CurrentRenderer.fileLoader) === null || _a === void 0 ? void 0 : _a.call(CurrentRenderer, { documentURI: documentURI, signal: signal, fileLoaderComplete: fileLoaderComplete });\n        }\n        else {\n            fileLoaders_1.defaultFileLoader({ documentURI: documentURI, signal: signal, fileLoaderComplete: fileLoaderComplete });\n        }\n        return function () {\n            controller.abort();\n        };\n    }, [CurrentRenderer]);\n    return { state: state, dispatch: dispatch, CurrentRenderer: CurrentRenderer };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}